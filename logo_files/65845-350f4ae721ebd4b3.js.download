"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65845],{81217:function(e,t,n){n.d(t,{Z:function(){return i},K:function(){return s}});var r=n(11987),i=function(){var e="/email/ss_premier_sub_account_activation_email";return{url:e,formattedUrl:(0,r.format)({pathname:e})}},s=function(){var e="/email/premier_cart_confirmation";return{url:e,formattedUrl:(0,r.format)({pathname:e})}}},65845:function(e,t,n){n.d(t,{r:function(){return Z}});var r=n(30266),i=n(809),s=n.n(i),a=n(67294),o=n(3263),c=n(22430),u=n(68423),l=n(76382),d=n(92809),p=n(91164),f=n(5152),m=n(76023),v=n(85893),b=["isOpen"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=(0,f.default)((function(){return Promise.all([n.e(79351),n.e(58858),n.e(87137),n.e(88698)]).then(n.bind(n,88698)).then((function(e){return e.CompLicensingDialog}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[88698]},modules:["../components/License/CompLicensingViews/DynamicCompLicensingDialog.jsx -> ./CompLicensingDialog"]}}),y=function(e){var t=e.isOpen,n=(0,p.Z)(e,b);return(0,m.B)(t)&&(0,v.jsx)(O,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},h=["isOpen"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var w=(0,f.default)((function(){return Promise.all([n.e(79351),n.e(65117),n.e(15577),n.e(94145),n.e(24122),n.e(67122)]).then(n.bind(n,95842)).then((function(e){return e.CompLicensingDrawer}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[95842]},modules:["../components/License/CompLicensingViews/DynamicCompLicensingDrawer.jsx -> ./CompLicensingDrawer"]}}),_=function(e){var t=e.isOpen,n=(0,p.Z)(e,h);return(0,m.B)(t)&&(0,v.jsx)(w,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},S=["isOpen"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var C=(0,f.default)((function(){return n.e(25307).then(n.bind(n,25307)).then((function(e){return e.CompLicensingSnackbar}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[25307]},modules:["../components/License/CompLicensingViews/DynamicCompLicensingSnackbar.jsx -> ./CompLicensingSnackbar"]}}),k=function(e){var t=e.isOpen,n=(0,p.Z)(e,S);return(0,m.B)(t)&&(0,v.jsx)(C,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},D=n(43267),I=n(46254),L=n(57880),x=function(e){var t=e.assets,n=e.compLicensingHandler,r=e.isDialogOpen,i=e.isDrawerOpen,s=e.isLicensing,a=e.isSnackBarOpen,o=e.licensingError,c=e.onDialogClose,u=e.onDrawerClose,l=e.onSnackbarClose,d=e.selectedAssetSize,p=e.setSelectedAssetSize,f=e.settingsData,m=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).licensingError,t=void 0===e?{}:e,n=(0,D.$G)(L.clK).t;return{cancel:n("common:actions_cancel"),downloadComp:n("common:actions_download_comp"),enterpriseCompLicense:n("ent:license_enterprise_comp"),genericErrorMessage:n("ent:license_now_error_message"),licensingError:(0,I.j2)({error:t,t:n}),licenseSuccess:n("ent:confirmation_alert_message"),licenseFormLabels:{buttonLabel:n("common:actions_download_comp"),disclaimer:(0,v.jsx)(D.cC,{i18nKey:"ent:comp_disclaimer",ns:L.clK,components:{bold:(0,v.jsx)("strong",{})}}),metadataFound:n("ent:previous_metadata_found_comp"),metadataMissing:n("ent:previous_metadata_missing_comp"),title:n("ent:add_metadata_to_comp")}}}({licensingError:o});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(y,{assets:t,isOpen:r,onClose:c,onLicense:n,labels:m,isLicensing:s,selectedAssetSize:d,setSelectedAssetSize:p,settingsData:f}),(0,v.jsx)(_,{assets:t,isLicensing:s,isOpen:i,labels:m,onClose:u,onLicense:n}),(0,v.jsx)(k,{isOpen:a,message:m.licensingError,onClose:l})]})};x.defaultProps={assets:null,isDialogOpen:!1,isDrawerOpen:!1,isLicensing:!1,isSnackBarOpen:!1,licensingError:{},selectedAssetSize:"",settingsData:{}};var E=n(96298),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allowMetadata,n=(0,a.useState)(null),i=n[0],d=n[1],p=(0,a.useState)(""),f=p[0],m=p[1],v=(0,a.useState)(""),b=v[0],g=v[1],O=(0,a.useState)(!1),y=O[0],h=O[1],j=(0,a.useState)(!1),w=j[0],_=j[1],S=(0,a.useState)(!1),P=S[0],C=S[1],k=(0,u.Z)(),D=k.isLicensing,I=k.licensingError,L=k.licensingAssetsHandler,Z=(0,c.U)(),A=(0,l.B)(),T=A.data,z=(0,a.useCallback)(function(){var e=(0,r.Z)(s().mark((function e(t){var n,r,i,a,o,c,u,l,d,p,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assets,r=void 0===n?[]:n,i=t.assetSize,a=t.metadata,o=t.pageSection,c=t.listId,m(r[0].id),u=!1,e.prev=3,e.next=6,(0,E.qP)({assets:r,assetSize:i,metadata:a,selectedAssetSize:b});case 6:return l=e.sent,e.next=9,L(l);case 9:if(d=e.sent,p=d.data,(0,E.bj)(r)&&1===r.length){e.next=15;break}return e.next=14,(0,E.tX)({assets:r,licensedContent:null===p||void 0===p||null===(f=p.meta)||void 0===f?void 0:f.licensedContent});case 14:Z({assets:r,isRedownload:!1,isQuickDownload:!1,isPaid:!1,isComp:!0,pageSection:o,listId:c});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),u=e.t0;case 20:return m(""),u&&!w&&C(!0),e.abrupt("return",{error:u});case 23:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),[w,L,Z,b]),M=(0,a.useCallback)(function(){var e=(0,r.Z)(s().mark((function e(n){var r,i,a,c,u,l,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.assets,i=n.assetSize,a=n.metadata,c=n.pageSection,u=n.listId,d(r),!(!y&&(0,o.U0)(r))){e.next=6;break}return h(!0),e.abrupt("return",Promise.resolve(null));case 6:if(l=!w&&(null===T||void 0===T?void 0:T.requireMetadataForComp)&&!a,p=(0,E.bj)(r),!l||p&&!t){e.next=12;break}return i&&g(i),_(!0),e.abrupt("return",Promise.resolve(null));case 12:return e.abrupt("return",z({assets:r,assetSize:i,metadata:a,pageSection:c,listId:u}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[z,y,w,T,t]),U=(0,a.useMemo)((function(){return{assets:i,compLicensingHandler:M,isDialogOpen:y,isDrawerOpen:w,isLicensing:D,isSnackBarOpen:P,licensingError:I,onDialogClose:function(){return h(!1)},onDrawerClose:function(){return _(!1)},onSnackbarClose:function(){return C(!1)},selectedAssetSize:b,setSelectedAssetSize:g,settingsData:T}}),[i,M,y,w,D,P,I,b,T]);return{CompLicensingViews:x,compLicensingHandler:M,compLicensingProps:U,licensingAssetId:f}}},96298:function(e,t,n){n.d(t,{SN:function(){return O},tX:function(){return y},qP:function(){return w},bj:function(){return _}});var r=n(92809),i=n(30266),s=n(809),a=n.n(s),o=n(3578),c=n(44828),u=n(87883),l=n(60969),d=n(55687),p=n(60996),f=n(52087),m=n(18937),v=n(28302);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(){var e=(0,i.Z)(a().mark((function e(t){var n,r,i,s,o,u,p,m,b,g,O,y,h,j,w,_,S,P,C,k,D,I,L;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.assets,r=t.licensedContent,i=t.supplementalUrlType,s=r[0]||{},o=s.downloadUrl,u=s.contentId,p=s.contentFormat,m=s.contentSize,b=s.supplementalUrls,g=s.licenseName,null===b||void 0===b||!b.length||!i){e.next=5;break}return O=b.find((function(e){return e.type===i}))||{},y=O.url,h=void 0===y?o:y,e.abrupt("return",h);case 5:if(j=l.b5.includes(g),w=n.find((function(e){return e.id===u}))||{},_=(0,f.Tp)(w),S=(0,d.G)({assets:n,contentId:u}),P=S.filename,C=S.shouldUpdateFilename,j||!C){e.next=22;break}return e.prev=10,e.next=13,v.uS.post((0,c.u8)().formattedUrl,{data:[{media_id:w.id,media_type:_,media_size:m,media_format:p,filename:P}]});case 13:return k=e.sent,D=k.data,I=(null===D||void 0===D?void 0:D.data[0])||{},L=I.attributes,e.abrupt("return",L.url||o);case 19:return e.prev=19,e.t0=e.catch(10),e.abrupt("return",o);case 22:return e.abrupt("return",o);case 23:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)(a().mark((function e(t){var n,r,i,s,c,u,l,p,f,b;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.assets,r=void 0===n?[]:n,i=t.licensedContent,!((s=void 0===i?[]:i).length>1)){e.next=10;break}return c=(0,d.r)({assets:r,licensedContent:s}),u=(0,o.e)({urlParams:{filename:c.bundleFilename}}).formattedUrl,e.next=6,v.jl.post(u,c.content);case 6:return l=e.sent,p=l.data,f=p.public_url,e.abrupt("return",(0,m.A_)(f));case 10:return e.next=12,O({assets:r,licensedContent:s});case 12:return b=e.sent,e.abrupt("return",(0,m.A_)(b));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var t=(0,p.Fy)({asset:e});return g(g({},e),{},{assetType:t,licenseId:l._r[t]})}))},j=function(){var e=(0,i.Z)(a().mark((function e(){var t,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,c.hL)(),n=t.url,e.prev=1,e.next=4,v.uS.get(n).then((function(e){return null===e||void 0===e?void 0:e.data}));case 4:return i=e.sent,e.abrupt("return",i.reduce((function(e,t){return g(g({},e),{},(0,r.Z)({},t.name,"-"))}),{}));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.Z)(a().mark((function e(){var t,n,r,i,s,o,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.assets,r=t.assetSize,i=t.metadata,s=t.selectedAssetSize,o=i){e.next=6;break}return e.next=5,j();case 5:o=e.sent;case 6:return e.abrupt("return",{assets:h(n),licenseMetadata:o,licensingType:l.td,selectedAssetSize:r||s||"",isVideoComp:!0});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,p.qw)({asset:e[0]||{}})===u.j0}},55687:function(e,t,n){n.d(t,{G:function(){return o},r:function(){return c}});var r=n(52087),i=n(69465),s="shutterstock",a="shutterstock_editorial",o=function(e){var t=e.assets,n=e.contentId,i=function(e){var t=e.asset;return(0,r.PD)(t)?{prefix:"shutterstock_offset",shouldUpdateFilename:!0}:(0,r.tS)({asset:t})?{prefix:a,shouldUpdateFilename:!1}:{prefix:s,shouldUpdateFilename:!1}}({asset:t.find((function(e){return e.id===n}))||{}}),o=i.prefix,c=i.shouldUpdateFilename;return{filename:"".concat(o,"_").concat(n),shouldUpdateFilename:c}},c=function(e){var t=e.assets,n=void 0===t?[]:t,c=e.licensedContent,u=void 0===c?[]:c,l=n.every((function(e){return(0,r.tS)({asset:e})})),d=u.map((function(e){var t=e.contentId,r=e.downloadUrl,i=e.contentFormat,s=o({assets:n,contentId:t}).filename,a=r.split("/").pop().split(".").pop();return(a.length>4||a.length<2)&&(a=i),{filename:"".concat(s,".").concat(a),url:r}})),p=(0,i.zs)();return{bundleFilename:"".concat(l?a:s,"_").concat(p,".zip"),content:d}}},68423:function(e,t,n){n.d(t,{Z:function(){return X}});var r,i=n(30266),s=n(86818),a=n(92809),o=n(809),c=n.n(o),u=n(67294),l=n(15313),d=n(44828),p=n(81391),f=n(87883),m=n(60969),v=n(85406),b=n(60996),g=n(20559),O=n(46254),y=n(53558),h=n(48483),j=n(52087),w=n(28302),_=function(e){var t,n=e.assets,r=void 0===n?[]:n,i=e.user,a=function(e){var t=e.assets,n={};return t.forEach((function(e){var t=(0,j.Tp)(e),r=(0,b.JD)({assetId:e.id,assetType:t});n[r]=[].concat((0,s.Z)(n[r]?n[r]:[]),[e])})),n}({assets:r});return null===(t=Object.values(a))||void 0===t?void 0:t.map((function(e){var t=function(e){var t,n=e.assets,r=(0,j.Tp)(n[0]);return{include:"subscriptions",content_type:(0,b.JD)({assetType:r,assetId:null===(t=n[0])||void 0===t?void 0:t.id}),content_ids:n.reduce((function(e,t){return[].concat((0,s.Z)(e),[t.id.toString()])}),[]).join(",")}}({assets:e}),n=(0,d.Td)({urlParams:{licenseeIdentifier:"organization-".concat(null===i||void 0===i?void 0:i.organizationId)},queryParams:t}).formattedUrl;return w.uS.get(n)}))},S=function(e){var t=e.data,n=[];return t.map((function(e){var t=e.id.split("-"),r=t[t.length-1],i=function(e){var t=e.assetEligibility,n=t.permittedLicenses,r=t.subscriptions;return null===r||void 0===r?void 0:r.filter((function(e){var t=e.license;return n.includes(t.replace("_unlimited",""))}))}({assetEligibility:e});return n.push({assetId:r,subscriptions:i})})),n},P=n(58682),C=n(76253),k=n(65014),D=n(87686),I=n(20468),L=n(54887),x=n(82674),E=n(43267),Z=n(53554),A=n.n(Z),T=n(81217),z="noticeError",M=n(57880),U=n(76382),N=n(80454),F=n(15938),B=new RegExp(A()),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.emailCartCheckoutConfirmation,n=e.orderEmail;return t&&n?n.split(",").filter((function(e){return B.test(e)})):[]},q=function(e){var t=e.t,n=e.keys,r=n.currentYear,i=n.emailAddress,s=n.purchaseOrder;return{copyright:t("site-footer:copyright",{CURRENT_YEAR:r}),emailSentTo:t("ent:email_sent_to",{EMAIL_ADDRESS:i}),emailSubjectLine:"".concat(t("ent:order_confirmation_email_subject")," | ").concat(null===s||void 0===s?void 0:s[0]," : ").concat(null===s||void 0===s?void 0:s[1]),name:t("account:profile_name"),needAssistance:t("ent:contact_sales_representative"),orderConfirmation:t("ent:order_confirmation"),purchaseInformation:t("ent:purchase_information_key"),shutterstockAddress:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l2"),shutterstockInc:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l1"),subtotal:t("ent:order_confirmation_email_subtotal"),thisIsNotAnInvoice:t("ent:not_an_invoice")}},V=n(28323);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=(r={},(0,a.Z)(r,m.td,d.CE),(0,a.Z)(r,m.zM,d.s0),r),$=function(e){var t=e.asset,n=e.subscriptions,r=(0,b.qw)({asset:t}),i=t.licenseId,a=t.contentTier;switch(r){case f.pX:return(0,h.I9)({assetType:f.pX,subscriptions:[].concat((0,s.Z)(null===n||void 0===n?void 0:n.videoSubscriptions),(0,s.Z)(null===n||void 0===n?void 0:n.videoCompSubscriptions)),selectedLicenseId:i});case f.xF:case f.j0:return(0,h.$L)({subscriptions:[].concat((0,s.Z)(n.musicSubscriptions),(0,s.Z)(n.musicCompSubscriptions)),licenseName:t.licenseId});case f.gP:return(0,h.$L)({subscriptions:[].concat((0,s.Z)(n.editorialImageSubscriptions),(0,s.Z)(n.editorialImageCompSubscriptions),(0,s.Z)(n.editorialVideoSubscriptions),(0,s.Z)(n.editorialVideoCompSubscriptions)),licenseName:t.licenseId,contentTier:a});case f.k4:default:return(0,h.$L)({subscriptions:[].concat((0,s.Z)(n.imageSubscriptions),(0,s.Z)(n.imageCompSubscriptions)),licenseName:t.licenseId,contentTier:a})}},X=function(){var e=(0,x.av)().data,t=(0,u.useState)(!1),n=t[0],r=t[1],a=(0,u.useState)(""),o=a[0],d=a[1],f=(0,u.useState)({}),j=f[0],Z=f[1],A=(0,L.j)().data,B=(0,l.I0)(),G=function(){var e=(0,D.yh)().analytics;return(0,u.useCallback)((function(t){var n=t.assets,r=void 0===n?[]:n;e.productLicensed({products:r.map((function(e){return(0,k.bR)({asset:e,shouldGetSearchContextFromAsset:!0})}))})}),[e])}(),X=(0,I.o)(),Y=(0,V.G)(),J=(0,v.PE)().locale,Q=function(){var e=(0,E.$G)(M.jp5).t,t=(0,L.j)().data,n=(0,N.b)().data,r=(0,U.B)().data,i=(0,F.z)({fetchTrigger:!0})||{},a=i.name,o=i.email,c=i.phone,l=(0,v.PE)(),d=l.locale,p=l.fullLocale,f=(0,I.o)();return{sendOrderConfirmationEmails:(0,u.useCallback)((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=i.cartTotalCurrency,l=i.filteredOrderMetadata,m=i.licenseMetadata,v=i.priceType,b=[].concat((0,s.Z)(null!==n&&void 0!==n&&n.emailCartCheckoutConfirmation?[null===t||void 0===t?void 0:t.email]:[]),(0,s.Z)(R(r)));if(!!b.length&&null!==l&&void 0!==l&&l.length){var g=q({t:e,keys:{currentYear:(new Date).getFullYear(),emailAddress:null===t||void 0===t?void 0:t.email,purchaseOrder:Object.entries(m)[0],repName:a,repPhoneNumber:c,repEmail:o}});try{var O={licenseMetadata:m,cartItems:l,invoiceDate:new Intl.DateTimeFormat(p).format(new Date),totalAmount:f({price:l.reduce((function(e){return e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).price}),0),localeCurrencyOverride:u,priceType:v}),fullName:null===t||void 0===t?void 0:t.fullName,labels:g,repName:a,repPhoneNumber:c,repEmail:o};w.IZ.post((0,T.K)().formattedUrl,{emails:(0,s.Z)(new Set(b)),emailBody:O,emailSubject:"".concat(g.emailSubjectLine),language:d})}catch(S){var y,h,j,_;null===(y=window.NREUM)||void 0===y||null===(h=y.setTransactionName)||void 0===h||h.call(y,"sendOrderConfirmationEmail/".concat(z)),null===(j=window.NREUM)||void 0===j||null===(_=j.noticeError)||void 0===_||_.call(j,S,{message:"Failed sending order confirmation emails to: ".concat(b.join(", "))})}}}),[p,d,r,f,o,a,c,e,null===t||void 0===t?void 0:t.email,null===t||void 0===t?void 0:t.fullName,null===n||void 0===n?void 0:n.emailCartCheckoutConfirmation])}}().sendOrderConfirmationEmails;return{isLicensing:n,licensingAssetsHandler:(0,u.useCallback)(function(){var t=(0,i.Z)(c().mark((function t(n){var s,a,o,u,l,f,v,j,k,D,I,L,x,E,T,z,M,U,N,F,R,q,V,W,ee,te,ne,re;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.alreadyLicensedAssets,a=void 0===s?[]:s,o=n.assets,u=void 0===o?[]:o,l=n.cartMetadata,f=void 0===l?{}:l,v=n.licenseeMetadata,j=void 0===v?{}:v,k=n.isVideoComp,D=void 0!==k&&k,I=n.licenseMetadata,L=void 0===I?{}:I,x=n.licensingType,E=n.selectedAssetSize,T=void 0===E?"":E,U=function(){var t=(0,i.Z)(c().mark((function t(){var n,r,s,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(_({assets:u,user:A}));case 2:return n=t.sent.map((function(e){var t=e.data;return(0,P.O)(t)})).flat(),r=S({data:n}),s=u.map(function(){var e=(0,i.Z)(c().mark((function e(t){var n,i,s,a,o,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,b.qw)({asset:t}),i=t.licenseId,s=(null===r||void 0===r?void 0:r.find((function(e){return e.assetId===String(t.id)})))||{},a=s.subscriptions,o=(0,h.I9)({assetType:n,subscriptions:a,selectedLicenseId:i})||{},u=o.id,l=o.license,e.t0=H,e.t1=H,e.t2=H,e.t3={},e.next=10,(0,g.Oo)({asset:t,selectedAssetSize:T,licenseName:l,isVideoComp:D});case 10:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6=T&&y.Bg[T]&&{comp_size:T},e.t7=(0,e.t1)(e.t5,e.t6),e.t8={},e.t9={license_name:l,show_modal:!0,subscription_id:u},e.abrupt("return",(0,e.t0)(e.t7,e.t8,e.t9));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=7,Promise.all(s);case 7:return a=t.sent,t.abrupt("return",{licensingPayload:{content:a,license_metadata:L,required_cookies:""},orderMetadata:u.map((function(t){var n=t.currency,r=t.description,i=t.descriptionLanguageMap,s=void 0===i?{}:i,a=t.id,o=t.itemType,c=t.headline,u=t.licenseId,l=t.preview,d=void 0===l?{}:l,p=t.price,f=t.priceType,m=t.src,v=t.thumb,b=t.thumbImageUrl,g=t.title,O=t.type,y=n,h=p,j=f;if(!y||!h||!j){var w=$({asset:t,subscriptions:e}),_=w.creditCurrency,S=w.creditPrice,P=w.creditType;y=y||_,h=h||S,j=f||P}return y&&!z&&(z=y),j&&!M&&(M=j),{description:s[J]||r,formattedPrice:X({price:h,localeCurrencyOverride:y,priceType:f}),headline:c,id:a,itemType:o,licenseId:u,licenseName:Y({licenseName:u}),price:h,priceType:j,thumbnailSrc:m||b||d.url||v,title:g,type:O}}))});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=2,r(!0),d(""),t.next=7,U({assets:u.map((function(e){return e.mediaItem?H(H({},e.mediaItem),{},{licenseId:e.licenseId}):e})),isVideoComp:D,licenseMetadata:L,selectedAssetSize:T,subscriptions:e});case 7:return R=t.sent,q=R.licensingPayload,V=R.orderMetadata,W=K[x]({urlParams:{licenseeIdentifier:"organization-".concat(null===A||void 0===A?void 0:A.organizationId)}}).formattedUrl,t.next=13,w.uS.post(W,q);case 13:return ee=t.sent,G({assets:u}),B(C.L6.setLicensedAssets({assets:u,metadata:f,licensedContent:(null===(N=(0,P.O)(ee.data))||void 0===N||null===(F=N.meta)||void 0===F?void 0:F.licensedContent)||[]})),u.some((function(e){var t=e.licenseId;return m.b5.includes(t)}))||(te=V.filter((function(e){return!(0,O.te)({alreadyLicensedAssets:a,asset:e})})),Q({cartTotalCurrency:z,filteredOrderMetadata:te,licenseMetadata:j,priceType:M})),d(p.MR),t.abrupt("return",ee);case 22:throw t.prev=22,t.t0=t.catch(2),Z(null===(ne=t.t0.response)||void 0===ne||null===(re=ne.data)||void 0===re?void 0:re.details),d(p.cM),t.t0;case 27:return t.prev=27,r(!1),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[2,22,27,30]])})));return function(e){return t.apply(this,arguments)}}(),[B,Y,J,X,G,Q,A,e]),licensingError:j,licensingStatus:o,setIsLicensing:r,setLicensingStatus:d}}},76382:function(e,t,n){n.d(t,{B:function(){return m}});var r=n(92809),i=n(40821),s=n(44828),a=n(60969),o=n(75874),c=n(24848),u=n(28302),l=n(58682),d=n(54887);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryParams,n=(0,d.j)(),r=n.data,p=f({target:a.dl,site_name:o.mC,setting_type:a.dl},t);return(0,i.ZP)((null===r||void 0===r?void 0:r.id)&&(null===r||void 0===r?void 0:r.organizationId)&&(0,s.nI)({queryParams:p}).formattedUrl,(function(e){return u.uS.get(e).then((function(e){return(0,l.O)(e.data)}))}),{dedupingInterval:c.yR})}}}]);